# Generated by Django 5.2.2 on 2025-07-29 16:43

import django.db.models.deletion
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='EquipmentSlot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
            ],
        ),
        migrations.CreateModel(
            name='ItemSubType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Тип предмета',
                'verbose_name_plural': 'Типы предметов',
            },
        ),
        migrations.CreateModel(
            name='CharacterProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='New player', max_length=50)),
                ('level', models.PositiveIntegerField(default=1)),
                ('experience', models.BigIntegerField(default=0)),
                ('experience_to_next_level', models.BigIntegerField(default=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('stamina_remaining', models.PositiveIntegerField(default=1440)),
                ('stamina_max', models.PositiveIntegerField(default=1440)),
                ('clan', models.CharField(blank=True, max_length=50, null=True)),
                ('character_class', models.CharField(choices=[('warrior', 'Воин'), ('mage', 'Маг')], default='warrior', max_length=10)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='CharacterMagicStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('magic_power', models.FloatField(default=0.0)),
                ('magic_power_fire', models.FloatField(default=0.0)),
                ('magic_power_air', models.FloatField(default=0.0)),
                ('magic_power_water', models.FloatField(default=0.0)),
                ('magic_power_earth', models.FloatField(default=0.0)),
                ('magic_power_light', models.FloatField(default=0.0)),
                ('magic_power_dark', models.FloatField(default=0.0)),
                ('magic_resistance', models.FloatField(default=0.0)),
                ('resist_fire', models.FloatField(default=0.0)),
                ('resist_air', models.FloatField(default=0.0)),
                ('resist_water', models.FloatField(default=0.0)),
                ('resist_earth', models.FloatField(default=0.0)),
                ('resist_light', models.FloatField(default=0.0)),
                ('resist_dark', models.FloatField(default=0.0)),
                ('magic_absorption_percent', models.FloatField(default=0.0)),
                ('magic_resist_penetration', models.FloatField(default=0.0)),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='magic_stats', to='accounts.characterprofile')),
            ],
        ),
        migrations.CreateModel(
            name='CharacterCombatStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phys_damage_min', models.PositiveIntegerField(default=3)),
                ('phys_damage_max', models.PositiveIntegerField(default=5)),
                ('damage_power_percent', models.FloatField(default=0.0)),
                ('crit_damage_power_percent', models.FloatField(default=0.0)),
                ('crit_chance', models.FloatField(default=0.0)),
                ('anticrit_chance', models.FloatField(default=0.0)),
                ('dodge_chance', models.FloatField(default=0.0)),
                ('antidodge_chance', models.FloatField(default=0.0)),
                ('shield_block', models.FloatField(default=0.0)),
                ('parry', models.FloatField(default=0.0)),
                ('counterattack', models.FloatField(default=0.0)),
                ('foresight', models.FloatField(default=0.0)),
                ('armor_penetration', models.FloatField(default=0.0)),
                ('armor_head', models.CharField(default='0d0', max_length=10)),
                ('armor_body', models.CharField(default='0d0', max_length=10)),
                ('armor_waist', models.CharField(default='0d0', max_length=10)),
                ('armor_legs', models.CharField(default='0d0', max_length=10)),
                ('damage_resistance', models.CharField(default='0d1', max_length=10)),
                ('phys_absorption_percent', models.FloatField(default=0.0)),
                ('crit_absorption_percent', models.FloatField(default=0.0)),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='combat_stats', to='accounts.characterprofile')),
            ],
        ),
        migrations.CreateModel(
            name='CharacterBattleStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('monster_wins', models.PositiveIntegerField(default=0)),
                ('monster_draws', models.PositiveIntegerField(default=0)),
                ('monster_losses', models.PositiveIntegerField(default=0)),
                ('player_wins', models.PositiveIntegerField(default=0)),
                ('player_draws', models.PositiveIntegerField(default=0)),
                ('player_losses', models.PositiveIntegerField(default=0)),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='battles', to='accounts.characterprofile')),
            ],
            options={
                'verbose_name': 'Боевая статистика',
                'verbose_name_plural': 'Боевые статистики',
            },
        ),
        migrations.CreateModel(
            name='CharacterResources',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('silver', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Серебро (гр.)')),
                ('silver_dust', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Серебряная пыль (гр.)')),
                ('gold', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Золото (гр.)')),
                ('gold_dust', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Золотая пыль (гр.)')),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='resources', to='accounts.characterprofile')),
            ],
        ),
        migrations.CreateModel(
            name='CharacterStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('strength_base', models.PositiveIntegerField(default=3)),
                ('strength_mod', models.IntegerField(default=0)),
                ('agility_base', models.PositiveIntegerField(default=3)),
                ('agility_mod', models.IntegerField(default=0)),
                ('intuition_base', models.PositiveIntegerField(default=3)),
                ('intuition_mod', models.IntegerField(default=0)),
                ('endurance_base', models.PositiveIntegerField(default=3)),
                ('endurance_mod', models.IntegerField(default=0)),
                ('intelligence_base', models.PositiveIntegerField(default=0)),
                ('intelligence_mod', models.IntegerField(default=0)),
                ('wisdom_base', models.PositiveIntegerField(default=0)),
                ('wisdom_mod', models.IntegerField(default=0)),
                ('spirit_base', models.PositiveIntegerField(default=0)),
                ('spirit_mod', models.IntegerField(default=0)),
                ('current_hp', models.PositiveIntegerField(default=0)),
                ('max_hp', models.PositiveIntegerField(default=0)),
                ('current_mp', models.PositiveIntegerField(default=0)),
                ('max_mp', models.PositiveIntegerField(default=0)),
                ('hp_regen_percent', models.FloatField(default=50.0)),
                ('mp_regen_percent', models.FloatField(default=0.0)),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='stats', to='accounts.characterprofile')),
            ],
        ),
        migrations.CreateModel(
            name='CharacterWallet',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('coins', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Монеты (кр.)')),
                ('marks', models.PositiveIntegerField(default=0, verbose_name='Марки (шт.)')),
                ('varangian_stones', models.PositiveIntegerField(default=0, verbose_name='Варяжские Камни (шт.)')),
                ('magic_coins', models.PositiveIntegerField(default=0, verbose_name='Волшебные Монеты (шт.)')),
                ('valknut_tokens', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Жетоны Валькнут (шт.)')),
                ('ref_coins', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=20, verbose_name='Монеты Наставника (шт.)')),
                ('character', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='wallet', to='accounts.characterprofile')),
            ],
            options={
                'verbose_name': 'Кошелёк персонажа',
                'verbose_name_plural': 'Кошельки персонажей',
            },
        ),
        migrations.CreateModel(
            name='CharacterWalletTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('currency', models.CharField(max_length=30, verbose_name='Валюта')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='Сумма')),
                ('description', models.CharField(blank=True, max_length=255, verbose_name='Описание операции')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата операции')),
                ('wallet', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='accounts.characterwallet')),
            ],
            options={
                'verbose_name': 'Транзакция кошелька',
                'verbose_name_plural': 'Транзакции кошельков',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Item',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('image', models.ImageField(blank=True, null=True, upload_to='items/icons/')),
                ('is_equippable', models.BooleanField(default=False)),
                ('is_stackable', models.BooleanField(default=False)),
                ('require_level', models.PositiveIntegerField(default=0, verbose_name='Требуемый уровень')),
                ('require_strength', models.PositiveIntegerField(default=0)),
                ('require_agility', models.PositiveIntegerField(default=0)),
                ('require_intuition', models.PositiveIntegerField(default=0)),
                ('require_endurance', models.PositiveIntegerField(default=0)),
                ('require_intelligence', models.PositiveIntegerField(default=0)),
                ('require_wisdom', models.PositiveIntegerField(default=0)),
                ('require_spirit', models.PositiveIntegerField(default=0)),
                ('bonus_strength', models.IntegerField(default=0)),
                ('bonus_agility', models.IntegerField(default=0)),
                ('bonus_intuition', models.IntegerField(default=0)),
                ('bonus_endurance', models.IntegerField(default=0)),
                ('bonus_intelligence', models.IntegerField(default=0)),
                ('bonus_wisdom', models.IntegerField(default=0)),
                ('bonus_spirit', models.IntegerField(default=0)),
                ('bonus_phys_damage_min', models.IntegerField(default=0)),
                ('bonus_phys_damage_max', models.IntegerField(default=0)),
                ('bonus_crit_chance', models.FloatField(default=0.0)),
                ('bonus_dodge_chance', models.FloatField(default=0.0)),
                ('bonus_shield_block', models.FloatField(default=0.0)),
                ('bonus_parry', models.FloatField(default=0.0)),
                ('bonus_counterattack', models.FloatField(default=0.0)),
                ('bonus_armor_penetration', models.FloatField(default=0.0)),
                ('bonus_phys_absorption_percent', models.FloatField(default=0.0)),
                ('bonus_magic_power', models.FloatField(default=0.0)),
                ('bonus_magic_power_fire', models.FloatField(default=0.0)),
                ('bonus_magic_power_air', models.FloatField(default=0.0)),
                ('bonus_magic_power_water', models.FloatField(default=0.0)),
                ('bonus_magic_power_earth', models.FloatField(default=0.0)),
                ('bonus_magic_power_light', models.FloatField(default=0.0)),
                ('bonus_magic_power_dark', models.FloatField(default=0.0)),
                ('bonus_resist_fire', models.FloatField(default=0.0)),
                ('bonus_resist_air', models.FloatField(default=0.0)),
                ('bonus_resist_water', models.FloatField(default=0.0)),
                ('bonus_resist_earth', models.FloatField(default=0.0)),
                ('bonus_resist_light', models.FloatField(default=0.0)),
                ('bonus_resist_dark', models.FloatField(default=0.0)),
                ('bonus_magic_resist_penetration', models.FloatField(default=0.0)),
                ('bonus_magic_absorption_percent', models.FloatField(default=0.0)),
                ('bonus_crit_absorption_percent', models.FloatField(default=0.0)),
                ('durability', models.PositiveIntegerField(default=0, verbose_name='Прочность')),
                ('max_durability', models.PositiveIntegerField(default=0, help_text='Максимальное значение прочности для этого предмета', verbose_name='Макс. прочность')),
                ('current_durability', models.PositiveIntegerField(blank=True, help_text='Текущее значение прочности (для инстансов предметов)', null=True, verbose_name='Текущая прочность')),
                ('price_money', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Цена в монетах')),
                ('price_silver', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Цена в серебре')),
                ('price_silver_dust', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Цена в серебряной пыли')),
                ('price_gold', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Цена в золоте')),
                ('price_gold_dust', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Цена в золотой пыли')),
                ('is_active_in_shop', models.BooleanField(default=False, verbose_name='Доступно для продажи в магазине')),
                ('slot', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='accounts.equipmentslot')),
                ('subtype', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='accounts.itemsubtype')),
            ],
        ),
        migrations.CreateModel(
            name='ItemInstance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('current_durability', models.PositiveIntegerField(blank=True, null=True)),
                ('is_equipped', models.BooleanField(default=False)),
                ('enchant_level', models.PositiveIntegerField(default=0)),
                ('extra_mod', models.CharField(blank=True, max_length=20, null=True)),
                ('equipped_slot', models.CharField(blank=True, max_length=20, null=True)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='instances', to='accounts.item')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_items', to='accounts.characterprofile')),
            ],
        ),
        migrations.CreateModel(
            name='PlayerLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('current_location', models.CharField(default='market', max_length=50)),
                ('current_zone', models.CharField(blank=True, max_length=50, null=True)),
                ('last_online', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='playerlocation', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Локация игрока',
                'verbose_name_plural': 'Локации игроков',
            },
        ),
        migrations.CreateModel(
            name='ShopItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активно в магазине')),
                ('item', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='shop_item', to='accounts.item')),
            ],
            options={
                'verbose_name': 'Товар магазина',
                'verbose_name_plural': 'Товары магазина',
            },
        ),
        migrations.CreateModel(
            name='CharacterInventory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('slot_index', models.PositiveIntegerField(default=0)),
                ('page', models.PositiveIntegerField(default=1)),
                ('slot_on_page', models.PositiveIntegerField(default=0)),
                ('is_equipped', models.BooleanField(default=False)),
                ('character', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory', to='accounts.characterprofile')),
                ('item_instance', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_entries', to='accounts.iteminstance')),
            ],
            options={
                'ordering': ['slot_index'],
                'unique_together': {('character', 'slot_index')},
            },
        ),
    ]
