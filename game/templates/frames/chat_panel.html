<head>
{% load static %}
<link rel="stylesheet" href="{% static 'css/chat_panel.css' %}">
<script src="{% static 'js/chat_panel.js' %}"></script>
<script>
// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ <head> –∏–ª–∏ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º </body>
async function logout() {
    try {
        const response = await fetch("{% url 'logout' %}", {
            method: "POST",
            headers: {
                "X-CSRFToken": "{{ csrf_token }}",
                "Content-Type": "application/x-www-form-urlencoded",
            },
        });
        if (response.ok) {
            window.location.href = "{% url 'login' %}"; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
        } else {
            console.error("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:", response.status);
        }
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:", error);
    }
}
</script>
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ -->
    <div class="chat-main-container">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞—Ç–∞ –∏ –≤–∫–ª–∞–¥–∫–∏ -->
        <div class="chat-content-container">
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ -->
            <div class="chat-tabs-container">
                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ -->
                <div class="tabs-wrapper">
                    <div class="chat-tab active" data-tab="world">–ú–∏—Ä</div>
                    <div class="chat-tab" data-tab="location">–õ–æ–∫–∞—Ü–∏—è</div>
                    <div class="chat-tab" data-tab="private">–ü—Ä–∏–≤–∞—Ç</div>
                    <div class="chat-tab" data-tab="trade">–¢–æ—Ä–≥</div>
                    <div class="chat-tab" data-tab="groupchat">–ì—Ä—É–ø–ø–∞</div>
                    <div class="chat-tab" data-tab="group" style="width:100px;">–ü–æ–¥–∑–µ–º–Ω—ã–π –º–∏—Ä</div>
                    <div class="chat-tab" data-tab="clan">–ö–ª–∞–Ω</div>
                    <div class="chat-tab" data-tab="alliance">–ê–ª—å—è–Ω—Å</div>
                    <div id="real-time-info" class="real-time-info">
                        00:00 üåû –î–µ–Ω—å | 01.01.2024
                    </div>
                </div>
 
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
                <div id="system-toggle" class="system-toggle">
                    –°–∏—Å—Ç–µ–º–Ω—ã–µ ‚ñº
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞—Ç–∞ -->
            <div id="chat-content" class="chat-content">
                <!-- –§–æ–Ω —á–∞—Ç–∞ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ -->
                <div class="chat-background">
                
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —á–∞—Ç–∞ -->
                    <div class="chat-messages">
                        <div data-tab="world"></div>
                        <div data-tab="location" style="display:none;"></div>
                        <div data-tab="private" style="display:none;"></div>
                        <div data-tab="trade" style="display:none;"></div>
                        <div data-tab="groupchat" style="display:none;"></div>
                        <div data-tab="group" style="display:none;"></div>
                        <div data-tab="clan" style="display:none;"></div>
                        <div data-tab="alliance" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–∏—Å—Ç–µ–º–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div id="system-panel" class="system-panel">
            <div style="padding:1px 5px;">
                <p>[12:05] –°–∏—Å—Ç–µ–º–∞: –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç</p>
                <p>[12:06] –°–∏—Å—Ç–µ–º–∞: –ò–≥—Ä–æ–∫5 –ø–æ–±–µ–¥–∏–ª –±–æ—Å—Å–∞</p>
                <p>[12:07] –°–∏—Å—Ç–µ–º–∞: –ù–∞—á–∞–ª–æ—Å—å —Å–æ–±—ã—Ç–∏–µ "–û—Å–∞–¥–∞ –∫—Ä–µ–ø–æ—Å—Ç–∏"</p>
                <p>[12:08] –°–∏—Å—Ç–µ–º–∞: –í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å"</p>
            </div>
        </div>

        <!-- –ì—Ä—É–ø–ø–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div id="group-panel" class="group-panel">
            <div style="padding:10px;">
                <button id="create-group-btn" style="width:100%;padding:5px;">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="bottom-container">
        <div class="chat-button" id="clear-button" data-tooltip="–û—á–∏—Å—Ç–∏—Ç—å">‚ùå</div>
        <textarea class="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
        <div class="chat-button" id="send-button" data-tooltip="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">‚úâÔ∏è</div>
        
        <div class="action-button" data-tooltip="–î—Ä—É–∑—å—è">üë•</div>
        <div class="action-button" id="trade-button" data-tooltip="–°–¥–µ–ª–∫–∏">ü§ù</div>
        <div class="action-button" data-tooltip="–ó–∞—è–≤–∫–∞ –º–æ–¥–µ—Ä–∞–º">üõ°Ô∏è</div>
        <div class="action-button" data-tooltip="–î–æ–Ω–∞—Ç –º–∞–≥–∞–∑–∏–Ω">üíé</div>
        <div class="action-button" id="clan-button" data-tooltip="–ö–ª–∞–Ω">üè∞</div>
        <div class="action-button" id="admin-button" data-tooltip="–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞">üëë</div>
        <div class="action-button" onclick="logout()" data-tooltip="–í—ã—Ö–æ–¥">üö™</div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∞ -->
    <div id="admin-login-modal" class="modal admin-login-modal">
        <h3>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
        
        <div style="margin-bottom:10px;">
            <label>–õ–æ–≥–∏–Ω:</label>
            <input type="text" id="admin-login">
        </div>
        
        <div style="margin-bottom:15px;">
            <label>–ü–∞—Ä–æ–ª—å:</label>
            <input type="password" id="admin-password">
        </div>
        
        <div class="modal-buttons">
            <button id="admin-login-submit">–í–æ–π—Ç–∏</button>
            <button id="admin-login-cancel">–û—Ç–º–µ–Ω–∞</button>
        </div>
        
        <div id="admin-login-error" class="error-message">
            –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã -->
    <div id="group-modal" class="modal group-modal">
        <h3>–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</h3>

        <label>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
        <select id="group-difficulty">
            <option value="1">1 —É—Ä–æ–≤–µ–Ω—å(3 —ç—Ç–∞–∂–∞)</option>
            <option value="2">2 —É—Ä–æ–≤–µ–Ω—å(5 —ç—Ç–∞–∂–µ–π)</option>
            <option value="3">3 —É—Ä–æ–≤–µ–Ω—å(7 —ç—Ç–∞–∂–µ–π)</option>
        </select>

        <label>–°–∏–ª–∞ –º–æ–Ω—Å—Ç—Ä–æ–≤:</label>
        <select id="monster-strength">
            <option value="75">75%</option>
            <option value="100" selected>100%</option>
            <option value="125">125%</option>
        </select>

        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ò–≥—Ä–æ–∫–æ–≤:</label>
        <select id="player-count">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
        </select>

        <label>–ü–∞—Ä–æ–ª—å (4 —Ü–∏—Ñ—Ä—ã):</label>
        <input type="text" id="group-password" maxlength="4" pattern="\d{4}" inputmode="numeric" placeholder="–í–≤–µ–¥–∏—Ç–µ 4 —Ü–∏—Ñ—Ä—ã">

        <div class="modal-buttons">
            <button id="confirm-create-group">–°–æ–∑–¥–∞—Ç—å</button>
            <button id="cancel-create-group">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

</body>